# RomBet
## Идея проекта
Эмуляция букмекерской конторы для ставок на спорт. Имеется некоторый набор команд и историю встреч между ними, по истории встреч считается коэффициенты на исходы матча. Пользователь делает ставки на матчи. По нажатии на кнопку "Рассчитать результат" генерируется результат матча на основе предыдущих встречах команд, рассчитываются ставки и выставляется новый тур матчей. Процесс повторяется.

## Краткое описание предметной области
Букмекерские конторы являются основными спонсорами огромного количества соревнований, команд, федераций и т. п.. По сути они стали основным рекламодателем в спорте.

## Краткий анализ аналогичных решений

Приложение|Реальные деньги|Просмотр результатов матчей|Списки лидеров
---|---|---|---
BetBoom|Да|Есть|Нет
SofaScore|Нет|Есть|Есть
FlashScore|-|Есть|-

## Краткое обоснование целесообразности и актуальности проекта
Ставки на спорт крайне прибыльная вещь для букмекерских контор. Эмулятор покажет, что на дистанции выиграть практически невозможно.

## Определения и обозначения
- БК - букмекерская контора.
- Коэффициент - величина, обратная вероятности.
- Тотал - количество голов в матче.
- Маржей называется заложенная в коэффициенты комиссия букмекера, за счет которой букмекерская контора гарантированно заработает.
- Тур - это этап проведения соревнования, в рамках которого команды играют друг с другом. В туре каждая команда проводит ровно один матч.
- Под "исходом" матча подразумевается победа домашней или гостевой команды или ничья.

## Описание ролей
Пользователь, выполняющий ставки;

## Use-Case - диаграмма
![Use-Case - диаграмма](report/img/UCD.svg)

## ER-диаграмма сущностей
![ER-диаграмма сущностей](report/img/ER.svg)

## Пользовательские сценарии
![](report/img/us.svg)

### Модель вычисления коэффициентов исходов матчей

#### Параметры
* количество рассматриваемых матчей - $N$ 
* количество побед - $W$
* количество ничьих - $D$
* количество поражений - $L$
* маржа БК - $k$
* ошибка - $e$
* разница в набранных очках команд в последних матчах - $P_d$
* влияние формы команд на результат - $\alpha$

#### Ограничения
* $N \in \mathbb{N}$
* $W, D, L \in \mathbb{N}_0$
* $L + D + W = N$
* $k \in [0; 1)$
* $e \in [0.8; 1.2]$
* $P_d, \alpha \in [-3N; 3N]$

#### Примечание
* Параметр "ошибка" обозначает отклонение "действительной" вероятности от рассчитанной и является случайной величиной 
* $Norm(x)$ - функция, нормализующая коэффициент, то есть удовлетворяющая: $\frac{1}{Norm(коэффициент\_на\_победу)} + \frac{1}{Norm(коэффициент\_на\_ничью)} + \frac{1}{Norm(коэффициент\_на\_поражение)} = 1$

#### Коэффициент на победу
$Norm(\frac{N + 3}{W + 1} + \frac{\alpha}{P_d}) \cdot (1 - k)$

#### Коэффициент на ничью
$Norm(\frac{N + 3}{D + 1} + \frac{\alpha}{P_d}) \cdot (1 - k)$

#### Коэффициент на поражение
$Norm(\frac{N + 3}{L + 1} + \frac{\alpha}{P_d}) \cdot (1 - k)$

### Модель вычисления коэффициентов количества мячей в матчах (тоталов)
#### Параметры
* количество голов - $X$
* количество рассматриваемых матчей - $N$ 
* количество матчей команды 1, где больше $X$ мячей - $G_1$
* количество матчей команды 2, где больше $X$ мячей - $G_2$
* количество матчей команды в очных встречах, где больше $X$ мячей - $G_{H2H}$
* маржа БК - $k$
* ошибка - $e$

#### Ограничения
* $X - 0.5 \in \mathbb{N}_0$
* $N \in \mathbb{N}$
* $G_1, G_2, G_{H2H} \ge 0$
* $k \in [0; 1)$
* $e \in [0.8; 1.2]$

#### Коэффициент на тотал больше $X$
$\frac{3N}{G_1 + G_2 + G_{H2H}} \cdot (1 - k)$

#### Коэффициент на тотал меньше $X$
$(1 - \frac{3N}{G_1 + G_2 + G_{H2H}}) \cdot (1 - k)$

## Тип приложения
Web SPA

## Выбранный технологический стек
Rust, TypeScript, React, PostgreSQL

## Верхнеуровневое разбиение на компоненты
![CD](report/img/cd.svg)

## UML-диаграмма классов для компонента доступа к данным и компонента с бизнес-логикой
![UML](report/img/UML.svg)